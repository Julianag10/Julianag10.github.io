<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Vive Wellness - Resources</title>
  <style>
    body { margin:0; font-family:sans-serif; }

    /* Navbar styles (same as index.html) */
    .main-nav {
      display:flex;
      justify-content:space-between;
      padding:.75rem 1rem;
      background:#befd73;
      color:black;
      align-items:center;
    }
    @media (min-width:768px){
      .main-nav { padding:1rem 2rem; }
    }
    .nav-menu {
      display:flex; gap:1.5rem;
      list-style:none; margin:0; padding:0;
    }
    .nav-menu a {
      text-decoration:none; color:black; padding:.5rem .75rem;
    }
    .nav-menu a:hover,
    .nav-menu a:focus {
      background:rgba(0,0,0,0.1); border-radius:4px;
    }

    .nav-toggle {
      display:flex; flex-direction:column; justify-content:center; align-items:center;
      gap:8px; width:44px; height:44px; background:none; border:none; cursor:pointer;
    }
    .nav-toggle span {
      display:block; width:30px; height:3px; background:black; border-radius:2px;
      transition:transform .3s ease, opacity .3s ease;
    }
    .nav-toggle.active span:nth-child(1){ transform:rotate(45deg) translate(6px,6px); }
    .nav-toggle.active span:nth-child(2){ opacity:0; }
    .nav-toggle.active span:nth-child(3){ transform:rotate(-45deg) translate(6px,-6px); }

    @media(min-width:768px){ .nav-toggle { display:none; } }
    @media(max-width:768px){
      .nav-menu {
        display:none; flex-direction:column;
        position:absolute; top:60px; left:0; right:0;
        background:#befd73; gap:1rem; padding:1rem;
      }
      .nav-menu.show { display:flex; }
    }

    /* Resources grid */
    .gallery-container {
      display:grid;
      grid-template-areas:
        "header header"
        "tools  sidebar"
        "main   sidebar";
      grid-template-columns:2fr 1fr;
      gap:1rem; padding:1rem;
    }
    .gallery-header { grid-area:header; }
    .tools { grid-area:tools; display:flex; flex-direction:column; gap:.5rem; }
    .gallery-grid {
      grid-area:main;
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
      gap:var(--card-gap,1rem);
    }
    .gallery-sidebar { grid-area:sidebar; background:#f0f0f0; padding:1rem; }

    .photo-card {
      border:2px solid black; background:lightblue;
      height:200px; display:flex; align-items:center; justify-content:center;
      transition:opacity .25s ease, transform .25s ease;
    }
    .photo-card.is-hidden { opacity:0; transform:scale(.98); pointer-events:none; }

    /* Compact density */
    :root { --card-gap:1rem; }
    body.compact { --card-gap:.5rem; }
    body.compact .photo-card { padding:.5rem; }

    .filter-btn[aria-pressed="true"] { outline:2px solid #333; border-radius:4px; }
    .result-count { font-style:italic; }

    @media(max-width:768px){
      .gallery-container {
        grid-template-areas:
          "header"
          "tools"
          "main"
          "sidebar";
        grid-template-columns:1fr;
      }
    }

    /* Visually hidden helper */
    .sr-only {
      position:absolute!important; width:1px; height:1px; padding:0; margin:-1px;
      overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; border:0;
    }
  </style>
</head>
<body>
  <!-- Shared Nav -->
  <nav class="main-nav">
    <div class="nav-brand">Vive Wellness</div>
    <button class="nav-toggle" aria-label="Toggle navigation menu" aria-expanded="false">
      <span></span><span></span><span></span>
    </button>
    <ul class="nav-menu">
      <li><a href="index.html">Home</a></li>
      <li><a href="resources.html">Resources</a></li>
    </ul>
  </nav>

  <!-- Page content -->
  <div class="gallery-container">
    <header class="gallery-header"><h1>Community Resources</h1></header>
    <section class="tools" aria-label="Resource tools">
      <div role="group" aria-label="Filter by category">
        <button class="filter-btn" data-filter="all" aria-pressed="true">All</button>
        <button class="filter-btn" data-filter="kids camps" aria-pressed="false">Kids Camps</button>
        <button class="filter-btn" data-filter="workout classes" aria-pressed="false">Workout Classes</button>
      </div>
      <label for="resource-search">Search resources</label>
      <input id="resource-search" type="search" placeholder="Type to filterâ€¦"/>
      <label><input id="density" type="checkbox"/> Compact view</label>
      <div id="results-announcer" aria-live="polite" class="sr-only"></div>
      <p class="result-count" aria-hidden="true"></p>
    </section>

    <main class="gallery-grid">
      <div class="photo-card" data-category="kids camps">Resource 1</div>
      <div class="photo-card" data-category="kids camps">Resource 2</div>
      <div class="photo-card" data-category="workout classes">Resource 3</div>
      <div class="photo-card" data-category="workout classes">Resource 4</div>
    </main>

    <aside class="gallery-sidebar">Filter Options & Support</aside>
  </div>

  <script>
    // Hamburger nav toggle
    const navToggle = document.querySelector('.nav-toggle');
    const navMenu = document.querySelector('.nav-menu');
    navToggle.addEventListener('click', () => {
      navMenu.classList.toggle('show');
      navToggle.classList.toggle('active');
      const expanded = navToggle.getAttribute('aria-expanded') === 'true';
      navToggle.setAttribute('aria-expanded', !expanded);
      if (!expanded) {
        const firstLink = navMenu.querySelector('a');
        if(firstLink) firstLink.focus();
      }
    });
    document.addEventListener('click', (e) => {
      if (!navMenu.contains(e.target) && !navToggle.contains(e.target)) {
        navMenu.classList.remove('show');
        navToggle.classList.remove('active');
        navToggle.setAttribute('aria-expanded', false);
      }
    });

    // Resource interactivity
    const filterButtons = document.querySelectorAll('.filter-btn');
    const searchInput   = document.getElementById('resource-search');
    const densityToggle = document.getElementById('density');
    const cards         = document.querySelectorAll('.photo-card');
    const countEl       = document.querySelector('.result-count');
    const liveRegion    = document.getElementById('results-announcer');
    let currentFilter = 'all', currentQuery = '';

    function normalize(str){ return (str||'').toLowerCase().trim(); }
    function cardMatches(card){
      const cat=card.dataset.category||'', text=card.textContent||'';
      return (currentFilter==='all'||cat===currentFilter) && normalize(text).includes(normalize(currentQuery));
    }
    function updateCount(n){
      countEl.textContent=`Showing ${n} resource${n===1?'':'s'}.`;
      liveRegion.textContent=countEl.textContent;
    }
    function applyFilters(){
      let visible=0;
      cards.forEach(c=>{
        if(cardMatches(c)){ c.classList.remove('is-hidden'); visible++; }
        else{ c.classList.add('is-hidden'); }
      });
      updateCount(visible);
    }
    filterButtons.forEach(btn=>{
      btn.addEventListener('click',()=>{
        currentFilter=btn.dataset.filter;
        filterButtons.forEach(b=>b.setAttribute('aria-pressed',String(b===btn)));
        applyFilters();
      });
    });
    searchInput.addEventListener('input',e=>{
      currentQuery=e.target.value; applyFilters();
    });
    function applyDensity(isCompact){
      document.body.classList.toggle('compact',isCompact);
      densityToggle.checked=isCompact;
      try{localStorage.setItem('vw_density_compact',String(isCompact));}catch{}
    }
    densityToggle.addEventListener('change',e=>applyDensity(e.target.checked));
    document.addEventListener('DOMContentLoaded',()=>{
      try{applyDensity(localStorage.getItem('vw_density_compact')==='true');}catch{}
      applyFilters();
    });
  </script>
</body>
</html>
